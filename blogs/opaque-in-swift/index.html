<!DOCTYPE html>
<html lang="en">
<head>
  <title>Opaque in Swift &middot; Mahi Garg</title>

  <!-- Meta -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="HandheldFriendly" content="true">

  <meta name="author" content="Mahi Garg" />  
  <meta name="owner" content="Mahi Garg">
  <meta property="twitter:title" content="Mahi Garg">

  <meta name="topic" content="Opaque in Swift">
    <meta name="description" content="Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1.">
    <meta property="og:description" content="Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1.">
    <meta property="twitter:description" content="Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1.">
    <meta name="abstract" content="Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1.">
    <meta name="summary" content="Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1."> 
    <meta property="og:type" content="article">
    <meta property="article:published_time" content=" 2024-10-15 "> 

    <meta name="url" content="https://mahigarg.github.io/blogs/opaque-in-swift/">
    <meta property="og:url" content="https://mahigarg.github.io/blogs/opaque-in-swift/">
    <meta property="al:web:url" content="https://mahigarg.github.io/blogs/opaque-in-swift/">

    <meta name="site_name" content="Mahi Garg">
    <meta property="og:site_name" content="Mahi Garg">

    <meta name="robots" content="max-image-preview:large">
    
    <meta name="robots" content="index,follow">
    <meta name="keywords" content="opaque,swift opaque,opaque in swift">
    
    
    <link rel="canonical" href="https://mahigarg.github.io/blogs/opaque-in-swift/">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="target" content="all" />
    <meta name="audience" content="all" />
    <meta name="coverage" content="Worldwide" />
    <meta name="distribution" content="Global">
    <meta name="rating" content="safe for kids" /> 
    <meta property="og:tags" content="Swift"> 

  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jost%3A0%2C100%3B0%2C200%3B0%2C300%3B0%2C400%3B0%2C500%3B0%2C600%3B0%2C700%3B0%2C800%3B0%2C900%3B1%2C100%3B1%2C200%3B1%2C300%3B1%2C400%3B1%2C500%3B1%2C600%3B1%2C700%3B1%2C800%3B1%2C900%7CCaveat%3A400%3B500%3B600%3B700&#038;display=swap" type="text/css" media="all" >
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto%3A100%2C100italic%2C200%2C200italic%2C300%2C300italic%2C400%2C400italic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%2C800%2C800italic%2C900%2C900italic%7CRoboto+Slab%3A100%2C100italic%2C200%2C200italic%2C300%2C300italic%2C400%2C400italic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%2C800%2C800italic%2C900%2C900italic&#038;display=auto" type="text/css" media="all" >

  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1093303282603666"
     crossorigin="anonymous">
  </script>

  <script>
  function onErrorLoadingAds() {
    console.log("AdBlocker blocks the ads")
  }
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" 
  onerror="onErrorLoadingAds()">
  </script>
  

  
  <meta name="google-site-verification" content="WsYlsB659Cuy0GKk82CS1ogZoTK0FIxmdSE759c1rMU" />
  

  <!-- Plugins Stylesheets -->
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/bootstrap/bootstrap.min.css" />
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/font-awesome/css/font-awesome.css" />
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/magnific-popup/magnific-popup.css" />
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/splitting/splitting.css" />
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/swiper/swiper.min.css" />
  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/animate/animate.css" />

  <!-- Main Stylesheets -->
  
  <link rel="stylesheet" href="https://mahigarg.github.io/scss/style.min.css" />

  <link rel="stylesheet" href="https://mahigarg.github.io/plugins/template-dark/dark.css" />
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="https://mahigarg.github.io/images/favicon/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="https://mahigarg.github.io/images/favicon/favicon.ico" type="image/x-icon" />

  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GLR31QSF3N"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-GLR31QSF3N');
  </script>
  

  </head>

<body class="page dark-skin">
  <div class="container-page ">
    <!-- Preloader -->
    
<div class="preloader">
  <div class="centrize full-width">
    <div class="vertical-center">
      <div class="spinner-logo">
		
        <img src="https://mahigarg.github.io/images/mahi.webp" alt="https://mahigarg.github.io/Mahi%20Garg" />
        <div class="spinner-dot"></div>
        <div class="spinner spinner-line"></div>
      </div>
    </div>
  </div>
</div>


    <!-- Header -->
    
<header class="header">
	<div class="header__builder">
		<div class="row">
			<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">

				
				<div class="logo">
					<a href="https://mahigarg.github.io/">
            			
						<img src="https://mahigarg.github.io/images/mahi.webp" alt="Mahi Garg" />
					</a>
				</div>

			</div>
			<div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 align-right">

				
				<a href="#" class="switcher-btn" aria-label="switcher-button">
					<span class="sw-before">
						<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23">
							<path id="Dark_Theme" data-name="Dark Theme" fill="#000" d="M1759.46,111.076a0.819,0.819,0,0,0-.68.147,8.553,8.553,0,0,1-2.62,1.537,8.167,8.167,0,0,1-2.96.531,8.655,8.655,0,0,1-8.65-8.682,9.247,9.247,0,0,1,.47-2.864,8.038,8.038,0,0,1,1.42-2.54,0.764,0.764,0,0,0-.12-1.063,0.813,0.813,0,0,0-.68-0.148,11.856,11.856,0,0,0-6.23,4.193,11.724,11.724,0,0,0,1,15.387,11.63,11.63,0,0,0,19.55-5.553A0.707,0.707,0,0,0,1759.46,111.076Zm-4.5,6.172a10.137,10.137,0,0,1-14.29-14.145,10.245,10.245,0,0,1,3.38-2.836c-0.14.327-.29,0.651-0.41,1.006a9.908,9.908,0,0,0-.56,3.365,10.162,10.162,0,0,0,10.15,10.189,9.776,9.776,0,0,0,3.49-.62,11.659,11.659,0,0,0,1.12-.473A10.858,10.858,0,0,1,1754.96,117.248Z" transform="translate(-1737 -98)" />
						</svg>
					</span>
					<span class="sw-after">
						<svg xmlns="http://www.w3.org/2000/svg" width="22.22" height="22.313" viewBox="0 0 22.22 22.313">
							<path id="Light_Theme" data-name="Light Theme" fill="#fff" d="M1752.49,105.511a5.589,5.589,0,0,0-3.94-1.655,5.466,5.466,0,0,0-3.94,1.655,5.61,5.61,0,0,0,3.94,9.566,5.473,5.473,0,0,0,3.94-1.653,5.643,5.643,0,0,0,1.65-3.957A5.516,5.516,0,0,0,1752.49,105.511Zm-1.06,6.85a4.1,4.1,0,0,1-5.76,0,4.164,4.164,0,0,1,0-5.788A4.083,4.083,0,0,1,1751.43,112.361Zm7.47-3.662h-2.27a0.768,0.768,0,0,0,0,1.536h2.27A0.768,0.768,0,0,0,1758.9,108.7Zm-10.35,8.12a0.777,0.777,0,0,0-.76.769v2.274a0.777,0.777,0,0,0,.76.767,0.786,0.786,0,0,0,.77-0.767v-2.274A0.786,0.786,0,0,0,1748.55,116.819Zm7.85-.531-1.62-1.624a0.745,0.745,0,0,0-1.06,0,0.758,0.758,0,0,0,0,1.063l1.62,1.625a0.747,0.747,0,0,0,1.06,0A0.759,0.759,0,0,0,1756.4,116.288ZM1748.55,98.3a0.777,0.777,0,0,0-.76.768v2.273a0.778,0.778,0,0,0,.76.768,0.787,0.787,0,0,0,.77-0.768V99.073A0.786,0.786,0,0,0,1748.55,98.3Zm7.88,3.278a0.744,0.744,0,0,0-1.06,0l-1.62,1.624a0.758,0.758,0,0,0,0,1.063,0.745,0.745,0,0,0,1.06,0l1.62-1.624A0.758,0.758,0,0,0,1756.43,101.583Zm-15.96,7.116h-2.26a0.78,0.78,0,0,0-.77.768,0.76,0.76,0,0,0,.77.768h2.26A0.768,0.768,0,0,0,1740.47,108.7Zm2.88,5.965a0.745,0.745,0,0,0-1.06,0l-1.62,1.624a0.759,0.759,0,0,0,0,1.064,0.747,0.747,0,0,0,1.06,0l1.62-1.625A0.758,0.758,0,0,0,1743.35,114.664Zm0-11.457-1.62-1.624a0.744,0.744,0,0,0-1.06,0,0.758,0.758,0,0,0,0,1.063l1.62,1.624a0.745,0.745,0,0,0,1.06,0A0.758,0.758,0,0,0,1743.35,103.207Z" transform="translate(-1737.44 -98.313)" />
						</svg>
					</span>
				</a>

				
				<a href="#" class="menu-btn" aria-label="menu-button">
					<span></span>
					<span></span>
				</a>

				
				<div class="menu-full-overlay">
					<div class="menu-full-container">
						<div class="container">
							<div class="row">
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

									
									<div class="menu-full">
										<ul class="menu-full">
											
                      
                      
                      
                      
                      <li class="menu-item">
                        <a class="splitting-text-anim-2" data-splitting="chars" href="https://mahigarg.github.io//">Home</a>
                        
                      </li>
                      
                      
                      
                      
                      <li class="menu-item menu-item-has-children has-children">
                        <a class="splitting-text-anim-2" data-splitting="chars" href="https://mahigarg.github.io//publications">Publications</a>
                        
                        <ul class="sub-menu">
                          
                          
                          
                          <li class="menu-item"><a class="splitting-text-anim-1" data-splitting="chars" href="/blogs/">Blogs</a></li>
                          
                          
                          
                          <li class="menu-item"><a class="splitting-text-anim-1" data-splitting="chars" href="/gists/">Gists</a></li>
                          
                        </ul>
                        
                      </li>
                      
                      
                      
                      
                      <li class="menu-item">
                        <a class="splitting-text-anim-2" data-splitting="chars" href="https://mahigarg.github.io//opensourcecontribution">Open Source Contribution</a>
                        
                      </li>
                      
										</ul>
									</div>

									
									<div class="menu-social-links">
                    
                    <a href="https://www.linkedin.com/in/mahi-garg/" target="_blank" rel="nofollow" class="scrolla-element-anim-1" title="Linkedin">
                      <i aria-hidden="true" class="fab fa-linkedin"></i>
                    </a>
                    
                    <a href="https://github.com/MahiGarg" target="_blank" rel="nofollow" class="scrolla-element-anim-1" title="Github">
                      <i aria-hidden="true" class="fab fa-github"></i>
                    </a>
                    
                    <a href="https://medium.com/@mahigarg" target="_blank" rel="nofollow" class="scrolla-element-anim-1" title="Medium">
                      <i aria-hidden="true" class="fab fa-medium"></i>
                    </a>
                    
									</div>

									<div class="v-line-block"><span></span></div>

								</div>
							</div>
						</div>
					</div>
					<div class="menu-overlay"></div>
				</div>

			</div>
		</div>
	</div>
</header>

    <!-- Wrapper -->
		<div class="wrapper single-post">
      



<section class="section section-inner started-heading">
	<div class="container">

		
		<div class="m-titles align-center">
			<div class="m-category scrolla-element-anim-1 scroll-animate" data-animate="active">
				
				
				<a href="https://mahigarg.github.io/categories/blog/">Blog</a>
				
				
				/ October 15, 2024 / 7 mins read / By Mahi Garg
			</div>
			<h1 class="m-title scrolla-element-anim-1 scroll-animate" data-animate="active">
				Opaque in Swift
			</h1>
		</div>

	</div>
</section>





<section class="section section-inner m-archive">
	<div class="container">

		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-1">

				
				<div class="description">
					<div class="post-content scrolla-element-anim-1 scroll-animate" data-animate="active">
						<p>Swift is known for its powerful type system and support for generics, which allows you to write flexible and reusable code. However, there are situations where generics can become overly complex or expose too much internal detail. To help with this, Swift introduced opaque types (using the some keyword) in Swift 5.1. Opaque types allow us to hide the underlying type while still maintaining strong type safety.</p>
<p>In this blog, we&rsquo;ll explore what opaque types are, how they differ from protocols with associated types and existentials, and look at practical examples where using <code>some</code> can simplify code.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="what-is-an-opaque-type">What is an Opaque Type?</h3>
<p>An opaque type in Swift is a way to hide the exact type returned by a function or property while still retaining type information for the compiler. This allows the caller to know the type exists and is the same across invocations but doesn’t reveal the specific type. It is often used with the <code>some</code> keyword, which specifies that the returned value conforms to a particular protocol but keeps the concrete type hidden.</p>
<p>Here’s a simple example of an opaque type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeOpaqueShape</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In this case, the function <code>makeOpaqueShape</code> returns some type that conforms to the <code>Shape</code> protocol, but the caller does not need to know the specific type (<code>Circle</code> in this case). All the caller knows is that the result conforms to the <code>Shape</code> protocol.</p>
<h3 id="why-use-opaque-types">Why Use Opaque Types?</h3>
<p><strong>Opaque types are useful when:</strong></p>
<ul>
<li>You want to hide the implementation details of a type but still maintain type safety.</li>
<li>You want to avoid exposing complex or unnecessary type information to the caller.</li>
<li>You want to avoid the performance overhead of boxing types (like with protocol existentials).</li>
<li>You want a simple alternative to returning types with generics, without making your code overly complex.</li>
</ul>
<p>Opaque types offer several advantages over using protocol types (also known as existentials), especially when you need to preserve the concrete type for operations like comparisons or optimizations that rely on the specific type.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="opaque-types-vs-protocols-with-associated-types">Opaque Types vs. Protocols with Associated Types</h3>
<p>Opaque types are different from protocol existentials, especially in cases where associated types or <code>Self</code> requirements are involved. Let’s clarify the distinction with an example.</p>
<h5 id="protocol-existentials-example">Protocol Existentials Example</h5>
<p>Suppose you have a protocol:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Shape</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">area</span>() -&gt; Double
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>And you want to <span style="color:#66d9ef">return</span> something that conforms to this <span style="color:#66d9ef">protocol</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>```swift
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeShape</span>() -&gt; Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This works because <code>Circle</code> conforms to <code>Shape</code>. However, the type information is erased, meaning you lose the concrete type and only know that it conforms to <code>Shape</code>. If we want to keep the exact type hidden while ensuring the return type is consistent across invocations, we can use <code>some</code> (an opaque type).</p>
<h5 id="opaque-type-example">Opaque Type Example</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeOpaqueShape</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The key difference here is that with <code>some Shape</code>, the caller still knows the return type conforms to <code>Shape</code>, but the compiler also knows that the return type will always be the same specific type across different invocations. In contrast, the existential version (<code>Shape</code>) can return any conforming type, and you lose the specific type information.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="practical-example-geometric-shapes">Practical Example: Geometric Shapes</h3>
<p>Let’s see how this works with a more detailed example involving geometric shapes.</p>
<h5 id="step-1-define-a-protocol">Step 1: Define a Protocol</h5>
<p>We’ll define a <code>Shape</code> protocol that requires a method to compute the area of the shape:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Shape</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">area</span>() -&gt; Double
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="step-2-create-concrete-shape-types">Step 2: Create Concrete Shape Types</h5>
<p>Now, we’ll create two concrete shapes that conform to <code>Shape</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Circle</span>: Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> radius: Double
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">area</span>() -&gt; Double {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> .pi <span style="color:#f92672">*</span> radius <span style="color:#f92672">*</span> radius
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rectangle</span>: Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> width: Double
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> height: Double
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">area</span>() -&gt; Double {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> width <span style="color:#f92672">*</span> height
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="step-3-opaque-return-types">Step 3: Opaque Return Types</h5>
<p>We can now create functions that return <code>some Shape</code> (opaque types). These functions will hide the specific type of shape but guarantee that the type conforms to <code>Shape</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeCircle</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeRectangle</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Rectangle(width: <span style="color:#ae81ff">10</span>, height: <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Here’s how you would use these functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> shape1 = makeCircle()
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Area of circle: </span><span style="color:#e6db74">\(</span>shape1.area<span style="color:#e6db74">())</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e">// Output: Area of circle: 314.159...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> shape2 = makeRectangle()
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Area of rectangle: </span><span style="color:#e6db74">\(</span>shape2.area<span style="color:#e6db74">())</span><span style="color:#e6db74">&#34;</span>)  <span style="color:#75715e">// Output: Area of rectangle: 200.0</span>
</span></span></code></pre></div><p>The important point here is that we can perform operations on the returned shape (<code>shape1</code> and <code>shape2</code>) knowing they conform to the <code>Shape</code> protocol, but we don’t know the exact underlying type unless we examine the implementation of the function.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="opaque-types-in-swiftui">Opaque Types in SwiftUI</h3>
<p>SwiftUI, Apple’s declarative UI framework, extensively uses opaque types. For example, the <code>some View</code> return type is commonly used in SwiftUI to hide the complex underlying view hierarchy while ensuring type safety.</p>
<p>Here’s a simple SwiftUI example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">SwiftUI</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ContentView</span>: View {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> body: some View {
</span></span><span style="display:flex;"><span>        VStack {
</span></span><span style="display:flex;"><span>            Text(<span style="color:#e6db74">&#34;Hello, World!&#34;</span>)
</span></span><span style="display:flex;"><span>            Button(action: {
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">&#34;Button tapped&#34;</span>)
</span></span><span style="display:flex;"><span>            }) {
</span></span><span style="display:flex;"><span>                Text(<span style="color:#e6db74">&#34;Tap me&#34;</span>)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In the <code>ContentView</code> struct, the <code>body</code> property returns <code>some View</code>. This indicates that the returned view will conform to the <code>View</code> protocol, but SwiftUI’s internal view composition details are hidden. This makes SwiftUI more efficient and less complex for developers to work with, without exposing the underlying types of each view.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="opaque-types-vs-generics">Opaque Types vs. Generics</h3>
<p>Opaque types and generics both serve similar purposes in Swift but are used in slightly different contexts.</p>
<p>Generic Function Example
A generic function that works with any <code>Shape</code> might look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printArea</span>&lt;T: Shape&gt;(of shape: T) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Area: </span><span style="color:#e6db74">\(</span>shape.area<span style="color:#e6db74">())</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This function can accept any type that conforms to the <code>Shape</code> protocol:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> circle = Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>printArea(of: circle)  <span style="color:#75715e">// Output: Area: 78.539...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> rectangle = Rectangle(width: <span style="color:#ae81ff">5</span>, height: <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>printArea(of: rectangle)  <span style="color:#75715e">// Output: Area: 50.0</span>
</span></span></code></pre></div><p>Generics are powerful and flexible, but in some cases, you don’t need the complexity of generics when returning from a function. If you simply want to return a type that conforms to a protocol but don’t need to make it generic, opaque types are a cleaner alternative.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="opaque-type-vs-generic-return-type">Opaque Type vs. Generic Return Type</h3>
<p>With a generic return type, you would need to do this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeGenericShape</span>&lt;T: Shape&gt;(<span style="color:#66d9ef">_</span> type: T.<span style="color:#66d9ef">Type</span>) -&gt; T {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> type == Circle.<span style="color:#66d9ef">self</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">as</span>! T
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Rectangle(width: <span style="color:#ae81ff">10</span>, height: <span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">as</span>! T
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This can be cumbersome compared to the simplicity of using an opaque return type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeOpaqueShape</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>
<h3 id="limitations-of-opaque-types">Limitations of Opaque Types</h3>
<p>While opaque types are incredibly useful, they do come with some limitations:</p>
<ol>
<li><strong>Single Return Type</strong>: Opaque types must return the same concrete type for every execution of the function. You cannot return different types based on runtime conditions.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#75715e">// This will NOT compile because Circle and Rectangle are different types.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeShape</span>() -&gt; some Shape {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> someCondition {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Circle(radius: <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Rectangle(width: <span style="color:#ae81ff">10</span>, height: <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li><strong>Cannot be Type-Casted</strong>: Since the specific type is hidden, you cannot cast an opaque type to another concrete type:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> shape = makeOpaqueShape()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> circle = shape <span style="color:#66d9ef">as</span>? Circle  <span style="color:#75715e">// This will result in a compile error</span>
</span></span></code></pre></div><ol start="3">
<li><strong>Limited to Return Types</strong>: You can only use some for return types, not for parameters or stored properties.</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>Opaque types (<code>some</code>) provide a powerful way to hide complex or unnecessary type details while maintaining strong type safety in Swift. They are especially useful when you want to return a value that conforms to a protocol but don’t want to expose the concrete type to the caller. Opaque types simplify code, enhance abstraction, and are widely used in frameworks like SwiftUI.</p>
<p>By leveraging opaque types, you can write cleaner, more concise code while still taking full advantage of Swift’s type system.</p>
<div class="col-xs-12 googleads" aria-hidden="true">
    
    
    
    
</div>


						
						<div class="tags-links">
							<span>Tags:</span>
							
							<a href="https://mahigarg.github.io/tags/swift/" rel="tag">Swift</a>
							
						</div>
						

						
					</div>
				</div>

				
				
				<div class="comments-post scrolla-element-anim-1 scroll-animate" data-animate="active">
					<div class="section__comments">

						<div class="m-titles">
							<div class="m-title align-left">Comments</div>
						</div>

						<div class="comments">
							<div id="disqus_trigger" class="load-more">
								<button onclick="load_disqus()" class="btn scrolla-element-anim-1 scroll-animate" data-animate="active">
									<span>Load Comments</span>
								</a>
							</div>
							<div id="disqus_thread"></div>
							<script>
								function load_disqus() {
								  
								  var disqus_trigger = document.getElementById('disqus_trigger'),
									  disqus_target = document.getElementById('disqus_thread'),
									  disqus_embed  = document.createElement('script'),
									  disqus_hook   = (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]);
								
								  
								  if( disqus_target && disqus_trigger ) {
									disqus_embed.type = 'text/javascript';
									disqus_embed.async = true;
									disqus_embed.src = 'https://mahigarg.disqus.com/embed.js';
									disqus_hook.appendChild(disqus_embed);
									disqus_trigger.remove();
									console.log('Disqus loaded');

									
									let remove_ads = setInterval(() => {
										console.log('Checking for Disqus Ads');

										let iframes = document.getElementsByTagName('iframe');

										for (var iframe in iframes) {
											if (iframes[iframe].id.includes("dsq") 
											&& iframes[iframe].name.includes("dsq") 
											&& !iframes[iframe].src.includes("disqus.com/embed/comments")) {
												iframes[iframe].style.display = 'none';
												clearInterval(remove_ads);
												console.log('Disqus Ads removed');
											}
										}
									}, 1000);

									setTimeout(function () {
										clearInterval(remove_ads);
									}, 5000);
								  }
								}
							</script>
							
							<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
						</div>

					</div>
				</div>
				
			</div>
		</div>

		<div class="v-line-left v-line-top"><div class="v-line-block"><span></span></div></div>

	</div>
</section>



<div class="section section-inner m-page-navigation">
	<div class="container">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-1">
				<div class="h-titles h-navs">
					
					<a href="https://mahigarg.github.io/blogs/some-vs-any-in-swift/">
						<span class="nav-arrow scrolla-element-anim-1 scroll-animate" data-splitting="chars" data-animate="active">
							Previous Post
						</span>
						<span class="h-title splitting-text-anim-2 scroll-animate" data-splitting="chars" data-animate="active">
							Some vs Any in Swift
						</span>
					</a>
					
					</br>
					</br>
					
					<a href="https://mahigarg.github.io/blogs/access-modifiers-in-swift/">
						<span class="nav-arrow scrolla-element-anim-1 scroll-animate" data-splitting="chars" data-animate="active">
							Next Post
						</span>
						<span class="h-title splitting-text-anim-2 scroll-animate" data-splitting="chars" data-animate="active">
							Access Modifiers in Swift
						</span>
					</a>
					
				</div>
			</div>
		</div>
	</div>
</div>



    </div>

    <!-- Footer -->
    
<div class="footer">
	<div class="footer__builder">
	  <div class="container">
		<div class="row">
		  <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
			<div class="social-links scrolla-element-anim-1 scroll-animate" data-animate="active">
				
				<a href="https://www.linkedin.com/in/mahi-garg/" target="_blank" rel="nofollow" title="Linkedin">
				  <i aria-hidden="true" class="fab fa-linkedin"></i>
				</a>
				
				<a href="https://github.com/MahiGarg" target="_blank" rel="nofollow" title="Github">
				  <i aria-hidden="true" class="fab fa-github"></i>
				</a>
				
				<a href="https://medium.com/@mahigarg" target="_blank" rel="nofollow" title="Medium">
				  <i aria-hidden="true" class="fab fa-medium"></i>
				</a>
				
			</div>
		  </div>

		  
		  <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
			<div class="copyright-text align-center scrolla-element-anim-1 scroll-animate" data-animate="active">
				© 2024 <strong>Mahi</strong>. All rights reserved
			</div>
		  </div>
		  <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
			<div class="copyright-text align-right scrolla-element-anim-1 scroll-animate" data-animate="active">
				Developed by <strong>Mahi Garg</strong>
			</div>
		  </div>
		</div>
	  </div>
	</div>
</div>

  </div>

  <!-- Cursor -->
	<div class="cursor"></div>

  <!-- Scripts -->
  <script src="https://mahigarg.github.io/plugins/jQuery/jquery.min.js"></script>
<script src="https://mahigarg.github.io/plugins/bootstrap/bootstrap.min.js"></script>
<script src="https://mahigarg.github.io/plugins/validate/jquery.validate.min.js"></script>
<script src="https://mahigarg.github.io/plugins/swiper/swiper.min.js"></script>
<script src="https://mahigarg.github.io/plugins/magnific-popup/magnific-popup.min.js"></script>
<script src="https://mahigarg.github.io/plugins/splitting/splitting.js"></script>
<script src="https://mahigarg.github.io/plugins/imagesloaded/imagesloaded.pkgd.min.js"></script>
<script src="https://mahigarg.github.io/plugins/isotope/isotope.pkgd.js"></script>
<script src="https://mahigarg.github.io/plugins/jarallax/jarallax.min.js"></script>
<script src="https://mahigarg.github.io/plugins/scrolla/jquery.scrolla.js"></script>
<script src="https://mahigarg.github.io/plugins/skrollr/skrollr.js"></script>
<script src="https://mahigarg.github.io/plugins/cookie/jquery.cookie.js"></script>
<script src="https://mahigarg.github.io/plugins/typed/typed.js"></script>
<script src="https://mahigarg.github.io/plugins/rrssb/rrssb.js"></script>


<script src="https://mahigarg.github.io/plugins/mark/mark.js"></script>
<script src="https://mahigarg.github.io/plugins/fuse/fuse.js"></script>
<script src="https://mahigarg.github.io/plugins/search/simple-search.js"></script>



<script src="https://mahigarg.github.io/js/form-handler.min.js"></script>


<script src="https://mahigarg.github.io/js/common.min.js"></script>

</body>

</html>
